# 分配约束教程

为设计分配约束可让您轻松控制和验证关键设计区域。约束类型包括间隙、布线和高速规则，这些规则可以分配给网络、层、类（网络集合）、组（引脚对集合）或单个引脚对。您还可以分配一组默认设计规则，适用于所有没有唯一规则的对象。

# 在本课中：

建立 PCB 的层布局
设置默认清除规则
制定净清算规则
设置条件规则

# 准备

如果它尚未运行，请启动 SailWind Logic 并打开 \\SailWind Projects\\Samples 文件夹中名为 previewchange.sch 的文件。

# 建立 PCB 的层布局

您可以定义 PCB 的层排列，包括层数、与嵌入平面层相关的网络、层叠和层厚度。

本教程设计是一个四层 PCB，包含两个内部平面层，支持多个平面网络。在本节中，您将使用图层定义工具定义本教程设计的图层布局。

# 增加层数

首次开始设计时，默认为双层 PCB。要更改层数，请执行以下操作：

1.  设置菜单 $>$ 层定义。
2.  在“层设置”对话框的“电气层”区域中，单击“修改”。
3.  在修改电气层数对话框中，键入 4。
4.  单击“确定”将层数从 2 增加到 4。
5.  在“重新分配图层”对话框中，单击“确定”。

# 设置图层排列和名称

设置正确的图层数后，为每个图层分配图层类型并输入图层名称。

# 设置第一层：

1.  在“图层设置”对话框中，选择图层列表中的“顶部”。
    
2.  在名称框中，键入 Primary Component Side。
    
3.  在 Electrical Layer Type 区域中，单击 Component 层类型。
    
4.  在“平面类型”区域中，单击“无平面”。
    
5.  将布线方向设置为垂直。
    

# 设置第二层：

1.  选择第二层，即“内层 2”，并将其重命名为“地平面”。
2.  在“平面类型”区域中，单击“CAM 平面”。
3.  单击分配网络按钮。
4.  在平面层网络对话框中，在全部网络列表中，向下滚动，单击网络 GND，然后单击
    添加以将网络与接地平面层关联。
5.  单击“确定”。
6.  将“路由方向”设置为“任意”。

# 设置第三层：

1.  选择第三层，即 Inner Layer 3，并将其重命名为 Power Plane。
2.  在平面类型区域中，单击混合平面。
3.  单击分配网络按钮。
4.  在平面层网络对话框中，选择所有网络列表中的网络 $+ 5 V$ 和 $+ 1 2 v$ ，然后单击
    添加以将网络与电源平面层关联。
5.  单击“确定”。
6.  将“路由方向”设置为“任意”。

# 设置最后一层：

1.  选择第四层“Bottom”，并将其重命名为“Secondary Component Side”。
2.  在 Electrical Layer Type 区域中，单击 Component 层类型。
3.  在平面类型区域中，单击无平面
4.  将布线方向设置为水平。

# 设置层堆叠

四层 PCB 的典型层堆叠由一对覆铜玻璃纤维基板和其间的绝缘体/粘合材料组成。绝缘体/粘合材料通常是一种树脂片，用于在制造多层板时将基板对粘合在一起。这种粘合材料也称为预浸料。
层堆叠：

![](/logic/tutorial/a0407a02089be92e06304a660204b2ffbbb7a472f2452564069dbe22bd9c5951.jpg)

使用“层厚度”对话框设置层堆叠值。

1.  在“图层设置”对话框中，单击“厚度”。
2.  在“层厚度”对话框中，单击“铜厚度单位”区域中的“重量（盎司）”。
3.  在“层”列表中，双击“主要元件面”的“厚度”框，并输入“2”，表示其铜的重量为 2 盎司。提示：1 盎司铜的重量对应 $= . 0 0 1 3 5 "$ 的铜厚度。
4.  对于接地平面，在厚度框中双击并输入 1 以表示其铜重量为一盎司。
5.  对于电源层，在厚度框中双击并输入 1 以表示其铜重量为一盎司。
6.  对于次级元件侧，在厚度框中双击并输入 2 以反映其铜重量为两盎司。
7.  双击接地层和电源层之间的基板列表框，然后切换到预浸料以将此层确立为绝缘体/粘合层。
8.  双击预浸料层的厚度框并输入 35。提示：介电常数是制造材料（例如 FR-4）给出的值，用于描述电气特性。
9.  单击“确定”关闭“层厚度”对话框。
10.  单击“确定”关闭“图层设置”对话框。

# 设置默认清除规则

您可以为设计规则层次结构的每个级别定义间隙、布线和高速规则。

![](/logic/tutorial/bce2b4cb70ac68fe4419c0892bdc3f682a112873fc0f1894f923202f44ff304a.jpg)
\*也适用于条件和差分对规则。

间隙规则对话框的间隙区域包含 PCB 设计数据矩阵。
您可以为矩阵中的每个或所有数据类型指定值。

1.  设置菜单 $>$ 设计规则 $>$ 默认按钮 $>$ 清除按钮。
    
2.  通过单击间隙矩阵左上角的“全部”来设置全局默认间隙值。
    
3.  在“输入间隙值”对话框中，输入 8，然后单击“确定”。结果：所有矩阵值同时更改。
    
4.  在“走线宽度”区域的“最小值”框中输入 6，在“推荐”框中输入 8，在“最大值”框中输入 12。
    
5.  在“相同网络”和“其他间隙”文本框中输入 12，但“追踪到 Crn”框除外。将此框设置为 0。
    
6.  单击“确定”。
    

# 设置默认路由规则

为避免在平面层上进行布线，请根据布线规则的定义，将其从所选布线层中移除。“布线规则”对话框的“层偏置”区域包含所选布线层的列表。此列表可用于指定允许布线的层。

1.  在规则对话框中，单击路由按钮。
2.  在“选定图层”列表中，选择“地平面”，然后按住 Ctrl 并单击
    电源平面将它们添加到选择中。
3.  单击“移除”可防止在平面层上进行布线。
4.  单击“确定”关闭“路由规则”对话框。
5.  单击“关闭”以关闭“默认规则”对话框。

# 制定净清算规则

您可以分配优先于先前输入的默认规则的特定网络许可。

1.  在规则对话框中，单击网络按钮。
2.  滚动浏览网络列表。按住 Ctrl 键 $^ +$ ，单击 $+ 5 V$ 、 $+ 1 2 v$ 和 GND。三个选定的网络将出现在规则类型按钮下的“选定”列表中。
3.  单击“清除”按钮可为所有三个网络设置相同的清除规则。
4.  通过单击间隙矩阵左上角的“全部”来设置全局默认间隙值。
5.  在“输入间隙值”对话框中，键入 10 作为全局间隙，然后单击“确定”。
6.  在“走线宽度”区域的“最小值”框中输入 10，在“推荐”框中输入 12，在“最大值”框中输入 15。
7.  要完成定义，请单击“确定”。
8.  关闭网络规则对话框。

# 设置条件规则

当两个网络之间需要特定的间隙（以避免对电路产生不利影响）时，必须定义条件规则。例如，美国保险商实验室 (UL) 要求在交流电直接连接到 PCB 时，必须隔离初级、次级和接地网络。您可以在设计规则层次结构的大多数组件之间分配条件规则。条件规则可以存在于网络之间、网络与类之间、类与类之间、网络与层之间等等。

要分配网络到网络条件规则：

1.  在规则对话框中，单击条件规则按钮。
2.  单击“源规则对象”区域中的“网络”。结果：源规则对象列表中将显示网络列表。
3.  选择网络 $+ 5 V$ 。
4.  在“违反规则对象”区域，单击“网络”。结果：在“违反规则对象”列表中出现网络列表。
5.  选择网络 $+ 1 2 v$ 。
6.  单击“创建”以定义条件规则。新条件将显示在“现有规则集”区域中。
7.  在当前规则集区域的“对象到对象”框中键入 25。
8.  关闭所有打开的对话框。结果：您刚刚创建的规则将使所有属于 $+ 5 \mathsf { V }$ 和 $+ 1 2 \vee$ 网络的对象保持 25 mil 的间距。
9.  不要保存设计的副本。

您已完成分配约束教程。