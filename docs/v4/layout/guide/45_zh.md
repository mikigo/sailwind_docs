# 第45章 错误检测、BMW与BLT、脚本与宏
以下主题讨论崩溃检测以及Basic Media Wizard和Basic Log Test工具的使用。

崩溃检测 BMW与BLT 会话日志文件 会话媒体文件 使用BLT回放会话 播放媒体与BLT /BMW命令行开关 脚本与宏

## 崩溃检测
如果启用了崩溃检测，当发生崩溃时"错误检测"对话框将打开，允许您保存SailWind环境的报告以及相关文件到压缩的转储文件中。然后您可以将此文件提交给我们的技术支持中心进行故障排除。您可以为此报告附加反馈，并可选择附加BMW媒体和项目文件。

除非软件崩溃且在软件*.ini*文件中启用了崩溃检测，否则"错误检测"对话框不可访问。

崩溃检测由*.ini*文件中的CrashDetection开关控制；默认情况下它是关闭的。

- 如果*.ini*文件的[General]部分不存在CrashDetection开关，或者该开关值为0，则崩溃检测关闭。不会创建崩溃时环境的报告。
- 如果*.ini*文件的[General]部分存在CrashDetection开关且值为1，则会检测崩溃并显示崩溃检测对话框。

## BMW与BLT
BMW(Basic Media Wizard)和BLT(Basic Log Test)是可用于录制和回放SailWind Logic、SailWind Layout和SailWind Router会话的工具。它们特别适合作为向技术支持工程师提供信息的手段，帮助他们识别和解决您可能遇到的问题行为。

如果您向技术支持报告SailWind工具的问题行为，技术支持工程师可能会要求您使用BMW录制会话播放媒体，记录导致问题的操作。然后技术支持工程师可以使用BLT回放会话来帮助他们识别和解决问题。

使用BMW创建会话播放媒体 为正常会话创建会话播放媒体 自动为崩溃会话创建会话播放媒体 手动为崩溃会话创建会话播放媒体

### 使用BMW创建会话播放媒体
选择表可以帮助选择使用哪种方法来创建会话播放媒体。

要创建会话播放媒体，必须在问题发生时启用BMW会话记录。如果在遇到问题时未启用会话记录，则必须在启用会话记录的新会话中重新执行导致问题的操作。此外，根据您要记录的问题是否导致SailWind工具崩溃，您可以基于当前或前一个SailWind工具会话来创建会话播放媒体。

下表指定了您必须使用以下哪种过程来创建会话播放媒体。

| 是否启用<br>记录? | SailWind<br>工具是否崩溃? | 那么使用此过程。                                               |
|-------------------|---------------------------|---------------------------------------------------------------|
| 是                | 否                        | 为正常会话创建会话播放媒体                                     |
| 否                | 否                        | 为正常会话创建会话播放媒体                                     |
| 是                | 是                        | 自动为崩溃会话创建会话播放媒体                                 |
| 否                | 是                        | 手动为崩溃会话创建会话播放媒体                                 |

### 为正常会话创建会话播放媒体
即使工具没有崩溃，您也可以录制SailWind Layout会话。

**步骤**

1. 启动SailWind工具，但不要打开遇到问题行为的文件。（必须在打开文件之前启用会话记录。）
2. 输入无模命令BMW ON并按Enter键启用会话记录。记录将保持启用状态，直到您使用BMW OFF命令禁用它。
3. 打开遇到问题行为的文件。
4. 执行产生问题行为的一系列操作。这些操作以及板或配置的更改将存储在当前会话的会话日志文件中。
5. 输入BMW无模命令并按Enter键。
6. 在Media Wizard对话框中，点击Create Media from Current Session。
7. 在User Initials文本框中输入您的首字母。（它们包含在播放媒体文件名中以标识文件属于您。）
8. 要删除会话日志文件中第一个Open和最后一个Save命令之间的所有条目，点击Delete Actions Before Last Save。这样可以消除在开始产生问题行为的操作系列之前可能执行的任何操作，使技术支持工程师更容易识别问题。
9. 点击**OK**创建会话媒体文件。

### 自动为崩溃会话创建会话播放媒体
在某些条件下，您可以自动录制导致软件崩溃的SailWind Layout会话。

如果您受到以下列出的限制影响，请参阅第1026页的"手动为崩溃会话创建会话播放媒体"。

**限制和局限性**

- 此过程仅在之前的（崩溃的）会话开始时已启用BMW记录且记录在整个会话期间保持启用时才有效。
- 如果任何其他SailWind工具实例与之前的（崩溃的）会话同时运行（任何时间段），此过程不会给出有用的结果。

**步骤**

1. 启动SailWind工具，但不要打开遇到问题行为的文件。（必须在打开文件之前启用会话记录。）
2. 输入无模命令BMW ON并按Enter键启用会话记录。记录将保持启用状态，直到您使用BMW OFF命令禁用它。
3. 打开遇到问题行为的文件。
4. 执行产生问题行为的一系列操作。这些操作以及板或配置的更改将存储在当前会话的会话日志文件中。
5. 崩溃后，重新启动SailWind工具。将显示一个对话框，询问您是否要为崩溃的会话保存媒体文件。点击**Yes**创建会话媒体文件。

### 手动为崩溃会话创建会话播放媒体
您可以手动为崩溃的会话创建会话播放媒体。

当您要重新创建的会话导致SailWind工具崩溃，并且由于列出的限制之一无法使用"自动为崩溃会话创建会话播放媒体"中描述的过程时，请使用此过程。

**步骤**

1. 启动SailWind工具，但不要打开遇到问题行为的文件。（必须在打开文件之前启用会话记录。）
2. 输入无模命令BMW ON并按Enter键启用会话记录。记录将保持启用状态，直到您使用BMW OFF命令禁用它。
3. 打开遇到问题行为的文件。
4. 执行产生问题行为的一系列操作。这些操作以及板或配置的更改将存储在当前会话的会话日志文件中。
5. 崩溃后，重新启动SailWind工具。
6. 输入**BMW**无模命令并按Enter键。
7. 在Media Wizard对话框中，点击**Create Media from Previous Session**。
8. 在User Initials框中输入您的首字母以标识您的会话播放媒体文件。
9. <span id="page-3-0"></span>点击**OK**创建会话媒体文件。

## 会话日志文件
每当启用BMW会话记录时，在*\SailWind Projects*文件夹中会维护两组会话日志文件。这些日志记录当前会话和上一个会话中执行的操作。

BMW将这些文件命名为：

| 当前会话日志文件            上一个会话日志文件 |
|------------------------------------------------|
| <pads_tool>_Next.log           <pads_tool>_NextBak.log          |
| <pads_tool>_Next.reg          <pads_tool>_NextBak.reg           |

*<pads\_tool>\_*Next.ini *<pads\_tool>\_*NextBak.ini

这些文件是动态的；每次启动会话时，当前会话日志文件将重命名为上一个会话日志文件，并创建新的当前会话日志文件。旧的上一个会话日志文件的内容将丢失。

每当您选择为会话创建会话媒体文件时，这些日志文件的适当集合将保存在永久位置，如会话媒体文件中所述。

**提示** 您可能会在*\SailWind Projects*文件夹中看到名为*<pads\_tool>\_Session.log*的日志文件。此文件与BMW创建的会话播放媒体无关。

## 会话媒体文件
每次创建会话播放媒体时，BMW会在*\SailWind Projects*文件夹中创建一个新的会话媒体文件夹，并将*.pcb*文件和会话的会话日志文件复制到其中。然后BMW根据会话媒体文件夹名称重命名这些文件。

会话媒体文件夹命名为<月><日><首字母><顺序字母>，其中：

- <月><日>是日期。
- <首字母>是您在Media Wizard对话框中输入的字母，用于个性化媒体文件。
- <顺序字母>是自动分配的字母，用于对特定日期创建的目录进行排序。

**示例：** *\SailWind Projects\0530jsb*表示一个会话媒体文件夹，创建于5月30日，使用首字母js，并且是该天创建的第二个会话媒体文件夹。

创建会话播放媒体时，以下文件将写入会话媒体文件夹：

**相关主题**

会话日志文件

## 使用BLT回放会话播放媒体
您可以使用BLT回放由BMW创建的会话播放媒体。

**步骤**

1. 输入BLT无模命令，并按Enter键。
2. 从Media Directories列表中选择会话播放媒体，然后点击**OK**。

**结果**

会话将被回放。

**提示** 要个性化媒体文件夹和会话播放媒体文件名，请从Media Directories列表中选择一个媒体会话，在New name框中输入新名称，然后点击**Rename**。

## /BMW命令行开关
如果您想自动录制每个SailWind Layout会话，可以在软件的启动选项中使用命令行开关。

如果您希望BMW在每次启动SailWind工具时自动提示您从前一会话创建媒体，请使用/BMW命令行开关启动SailWind工具。或者使用/BMW-xx（其中xx代表您的首字母，用于文件夹和文件名中以标识它们属于您）。

当您将BMW用作命令行选项时，它会创建前一会话的媒体；使用BMW无模命令创建当前会话的媒体。

## 脚本与宏
所有脚本和宏文档已移动。

可以在SailWind Layout命令参考手册中找到。