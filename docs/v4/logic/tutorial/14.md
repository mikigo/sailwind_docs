# Designing for Analog Simulation Tutorial
Analog parts require special analog attributes. The SPICE Netlist feature uses the analog attributes to build the SPICE netlist for the SPICE simulator. SPICE models can also be linked to parts to provide the SPICE netlister with required values.

****In this lesson:****

- Creating an RLC circuit
- Creating an opamp circuit
- Adding a model to the library

****Restriction****

This tutorial requires the SailWind SPICEnet licensing option. On the Help menu, click **Installed Options** to determine whether you can proceed..

****Preparation****

If it is not already running, start SailWind Logic.

## Creating an RLC circuit
Build a resistor-inductor-capacitor circuit using analog parts. Add analog attributes to the parts for netlisting to a SPICE tool.

****Start a new schematic****

Click the **New** button . At the prompt, click **No** to saving the file.

****Add the spice library****

The parts for the design are located in the Spice library. Add the library to the Library manager.

- 1. **File** menu > **Library**.
- 2. In the Library Manager dialog box, click **Manage Lib. List**.
- 3. In the Library List dialog box, click **Add**.
- 4. In the Add Library dialog box, select the **spice** library and click **Open**.
- 5. Select the **spice** library in the Library list, and click the **Up** button until the spice library is at the top of the list.
- 6. Click **OK**.
- 7. In the Library Manager dialog box, click **Close**.

****Add the analog parts****

Begin building the RLC circuit by adding the required parts to the schematic.

- 1. Add part button **.**
- 2. In the Add Part Type from Library dialog box, in the Filter area, ensure that the **spice** library is listed in the Library list and that the Items box contains a "\*" to show all library items. Click **Apply** if any changes were made in the filter.
- 3. Select the **CAP0805** capacitor and then click **Add**.

****Circuit to be drawn****

![](/layout/tutorial/14/_page_1_Figure_6.jpeg)

- 4. Click to place the capacitor in the schematic.
- 5. Press **Esc** to cancel adding additional capacitors.
- 6. In the Add Part from Library dialog box, repeat steps 3-5 for the following Part Types.

| Part Type       |
|-----------------|
| IND-MOLDED      |
| RES0805         |
| VOLTAGE_SUPPLY* |
|                 |

\*If prompted, use V for the alpha-prefix.

7. When finished, click **Close** in the Add Part from Library dialog box.

****Add connections to the analog parts****

Connect all the components, using the picture in the previous section as a guide.

1. Add Connection button **.**

- 2. Select a pin to start your connections, click to create corners, and select a pin to complete your connections.
- 3. Select the connection between the capacitor and the voltage supply.
- 4. Drag to create the power stub, moving the pointer down.
- 5. **Right-click** and click **Ground**.
- 6. Click to place the ground symbol.
- 7. Press **Esc** to exit Add Connection mode.

****Label the connections****

Label the connections between the components. Labels make the SPICE netlist easy to understand.

- 1. **Right-click** and click **Select Anything**.
- 2. Double-click the net between the power supply and the resistor.
- 3. In the Net Properties dialog box, select the **Net Name Label** check box.
- 4. Type **INPUT** in the Net Name box and then click **OK**.
- 5. Repeat steps 2-4 for the remaining nets. Use the net names in the following table.

| Net Between the        | Net Name |
|------------------------|----------|
| Resistor and inductor  | MID      |
| Inductor and capacitor | OUT      |

The ground connection is automatically labeled with the addition of the ground symbol.

****Review analog attributes****

Attributes are added to parts in the library or in the schematic. Examine the predefined SPICE attributes on the parts in the schematic.

- 1. **Right-click** > **Select Parts** > select a part > **right-click** > **Attributes**.
- 2. In the Part Attributes dialog box, examine the Sim.Analog.Order and Sim.Analog.Prefix attributes. All analog attributes contain the prefix Sim.Analog.
- 3. Click **OK** to close the Part Attributes dialog box.

**Tip:** A detailed list of the SPICE/Analog attributes can be found in Help. In the Topics tab of the Help, point to SPICE Netlist Attribute Glossary.

****Set up the netlister****

The SPICE Netlister creates a netlist format for several different SPICE tools.

- 1. **Tools** menu > **SPICE Netlist**.
- 2. In the SPICEnet dialog box, in the Select Sheets list area, select the **Sheet 1** check box.
- 3. In the Output Formats list, select the vendor format of the SPICE software you will use.
- 4. Click **Simulation Setup**.
- 5. Select the **AC Analysis** check box.
- 6. Click the **AC Analysis** button.
- 7. Ensure the Interval is set to 10 points per Decade.
- 8. Ensure the Frequency starts at 1Hz and ends at 1kHz, and then click **OK**.
- 9. Click **OK** in the Simulation Setup dialog box.
- 10. Click **OK** in the SPICEnet dialog box to create the netlist.

****Checking the netlist****

The netlist opens in the default text editor and can be viewed or edited before importing into SPICE software.

- 1. Notice the parameters from the AC Analysis.
- 2. Notice the connections and attribute values are listed beside the referenced parts.
- 3. Do not save a copy of the file.

## Completing an opamp circuit
Complete another common analog circuit â€“ the opamp circuit. Add an opamp from the library and examine the SPICE netlist.

****Open the opamp circuit****

 Click the Open button and open the file named **opamp.sch** in the \ SailWind Projects\Samples folder.

****Add the missing opamp****

- 1. Add Part button **.**
- 2. In the Add Part Type from Library dialog box, select the OP-471 part and then click **Add**.
- 3. Position the part over the open-ended connections in the schematic and click to place the gate.
- 4. Press **Esc** to cancel adding additional opamp gates.
- 5. Click **Close** in the Add Part Type from Library dialog box.

****Add attribute values****

Add net name values to the analog attributes of the amp.

- 1. With nothing selected > **right-click** > **Select Parts**.
- 2. Select the **U1-A** part.
- 3. **Right-click** and click **Attributes**.
- 4. Double-click in the **Value** box of the Neg attribute.
- 5. Type **OP\_VIN** in the Value box.

6. Repeat steps 4 and 5 and use the following values for each attribute.

| Attribute | Value |
|-----------|-------|
| Out       | VOUT  |
| Pos       | GND   |

7. Click **OK**.

****Set up the netlister****

- 1. **Tools** menu > **SPICE Netlist**.
- 2. In the SPICEnet dialog box, in the Select Sheets list, select the **Sheet 1** check box.
- 3. In the Output Formats list, select the vendor format of the SPICE software you will use.
- 4. Click **Simulation Setup**.
- 5. Select the **Transient** check box and clear all other check boxes.
- 6. Click the **Transient** button.
- 7. Ensure the following parameters exist.

| Parameter           | Value |
|---------------------|-------|
| Data Step Time      | 1ms   |
| Total Analysis Time | 10ms  |

- 8. Select the **Use Initial Conditions** check box and then click **OK**.
- 9. Click **OK** in the Simulation Setup dialog box.
- 10. Click **OK** in the SPICEnet dialog box to create the netlist.

****Checking the netlist****

Check the netlist for errors.

Notice the line **\* Could not open data file lm741n.mod**.

**Tip:** The amp in the schematic refers to an analog model and there is no model file in the library.

## Adding a model to the library
Add a SPICE model to the lm741 part in the library to provide the netlister with essential values for simulation.

- 1. Using an Explorer window, navigate to your libraries folder. C:\<install\_folder>\<version>\ Libraries\
- 2. Add a new folder entitled **spice**.
- 3. In the spice folder, add a new folder entitled **Analog Models**.
- 4. Copy the lm741n.mod file from the C:\ SailWind Projects\Samples folder and paste it into the Analog Models folder.

****Run the SPICE Netlister****

Create an error free SPICE netlist with the added model in the library.

- 1. **Tools** menu > **SPICE Netlist**.
- 2. Ensure your settings haven't changed.
- 3. Click **OK** in the SPICE Netlist dialog box to create the netlist.
- 4. Click **Yes** to overwriting the existing file.
- 5. Examine the netlist to see the additional SPICE model information.

**You completed the creating library parts tutorial.**