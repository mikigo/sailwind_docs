# 第19章 设置规则和使用禁止区
阅读以下主题以了解更多关于为设计设置设计规则的信息。您也可以从原理图导入规则。

设计规则 设计规则传输 设计规则的导入和导出 为设计创建规则 设计规则设置 创建设计规则报告 开启设计规则检查 检查设计规则 限制元件层高度 限制元件层区域高度 禁止区

## 设计规则
设计规则代表支持制造、信号完整性和其他设计需求的约束条件，如间距和可用布线层。SailWind Layout可以在您交互式放置和布线设计时执行设计规则检查（称为在线设计规则检查或简称DRC），或在完成设计操作后执行。

您设置的大多数规则由在线设计规则检查使用，可以主动防止您犯设计错误。有些规则仅在使用验证设计实用程序作为后处理时检查。最后，有些规则仅由SailWind Router的高级功能使用。

设置策略 设计规则层次结构 设计规则类别 非默认规则指示器 高级规则选项 设计规则检查

### 设置策略
为设计设置规则的策略第一步是创建一组默认规则。

默认规则是一组适用于设计中所有未分配其他规则的对象的规则。具有层次结构规则的对象优先于默认规则。例如，线宽为10的引脚对规则将覆盖线宽为5的默认规则。

**注意：** 较大的间距规则始终优先于层次结构的顺序。例如，如果您使用50密耳的默认间距规则，但使用10密耳的更高网络间距规则，则更严格的50密耳默认间距规则优先并应用于网络，即使创建了层次结构的网络间距。间距规则在层次结构的较低级别应较不严格。它们应是最小间距值。

创建默认规则集后，根据设计需求创建层次结构规则。任何创建的层次结构规则都基于默认集。

### 设计规则层次结构
设计规则层次结构使您能够为整个设计指定默认规则集，并为单个对象或对象集合指定附加规则。

例如，您可能在默认设计规则中指定一个适用于信号网络的小线宽，然后为第1816页上由电源网络组成的类指定一个大线宽。

由于对象可能受多个设计规则约束，设计规则层次结构指定了规则类型的优先级，因此您可以预测哪个设计规则应用于对象。

**基本对象层次结构**

设计中的对象使用基本对象或关系层次结构定义。

设计层次结构可以在规则对话框中轻松可视化。

层次结构的最低级别从默认级别开始。一旦设置了默认规则，它们适用于所有设计对象，除非您在层次结构的更高级别自定义规则。在下图中，默认规则右侧的每个对象优先于其之前的对象。例如，网络级别比类级别具有更高的优先级，而类级别仅比默认级别具有更高的优先级。层次结构的元件级别在层次结构中具有最高优先级。

![](/layout/guide/19/_page_2_Figure_3.jpeg)

**图27. 基本对象层次结构**

|  | 表93. 层次结构描述 |
|--|----------------------------------|
|  |                                  |

| 层次结构级别 | 描述                                                                                                                                                                                                |  |
|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|
| 默认         | 如果没有其他单独定义的规则，则适用于对象的规则。                                                                                                                            |  |
| 类           | 需要相同规则的网络集合（称为类）的规则。                                                                                                                                 |  |
| 网络             | 特定网络的规则。                                                                                                                                                                                  |  |
| 组           | 需要相同规则的引脚对集合（称为组）的规则。                                                                                                                            |  |
| 引脚对        | 特定引脚对的规则。<br>使用示例：一个网络需要为其内部的某些引脚到引脚<br>连接使用不同的线宽。您可以仅对这些选定的引脚到引脚<br>连接应用规则。 |  |
| 封装           | 使用特定封装的所有元件的规则。                                                                                                                                                           |  |
| 元件       | 特定元件的规则。                                                                                                                                                                            |  |

**完整层次结构**

完整层次结构不限于规则对话框中的七个按钮。

条件规则在完整设计规则层次结构中添加了许多级别，并被广泛使用。条件设计规则是在对象与条件规则中命名的另一个对象相邻和/或在条件规则中命名的层上时生效的规则。例如：根据其所在的层更改迹线在其长度上的任何点。网络A可能被分配默认间距为12，但在进入第4层时需要减少到8。在这种情况下，您可以为网络A分配12作为默认值，并制定一个条件规则，将8密耳的间距应用于网络A对第4层。

尽管层次结构比规则对话框中看到的基本对象层次结构更广泛，但基本对象层次结构中的关系仍由条件规则维护。例如，网络规则在基本层次结构中比类规则具有优先级。因此，网络到网络条件规则也比类到类规则具有优先级。

以下列表是所有可能的设计规则涉及时的完整层次结构。此列表按优先级从低到高列出所有规则。默认规则（级别1）具有最低优先级，代表规则层次结构的最低级别。元件规则（级别32）具有最高优先级，代表规则层次结构的最高级别。

![](/layout/guide/19/_page_3_Picture_2.jpeg)

**注意：**

电气网络规则不是规则层次结构的一部分。

- 1. 默认规则（第416页）
- 2. 特定层的默认间距规则（条件）（第416页）
- 3. 类规则（第418页）
- 4. 特定层的类间距规则（条件）（第422页）
- 5. 网络规则（第423页）
- 6. 特定层的网络间距规则（条件）（第424页）
- 7. 组规则（第426页）
- 8. 特定层的组间距规则（条件）（第430页）
- 9. 引脚对规则（第431页）
- 10. 特定层的引脚对间距规则（条件）（第432页）
- 11. 类对类规则（条件）（第433页）
- 12. 特定层的类对类规则（条件）（第433页）
- 13. 网络对类规则（条件）（第435页）
- 14. 特定层的网络对类规则（条件）（第435页）
- 15. 网络对网络规则（条件）（第437页）
- 16. 特定层的网络对网络规则（条件）（第437页）
- 17. 组对类规则（条件）（第439页）
- 18. 特定层的组对类规则（条件）（第439页）
- 19. 组对网络规则（条件）（第441页）
- 20. 特定层的组对网络规则（条件）（第441页）
- 21. 组对组规则（条件）（第443页）
- 22. 特定层的组对组规则（条件）（第443页）
- 23. 引脚对类规则（条件）（第445页）
- 24. 特定层的引脚对类规则（条件）（第445页）
- 25. 引脚对网络规则（条件）（第447页）
- 26. 特定层的引脚对网络规则（条件）（第447页）
- 27. 引脚对组规则（条件）（第449页）
- 28. 特定层的引脚对组规则（条件）（第449页）
- 29. 引脚对引脚对规则（条件）（第451页）
- 30. 特定层的引脚对引脚对规则（条件）（第451页）
- 31. 封装规则（第453页）

![](/layout/guide/19/_page_4_Picture_12.jpeg)

**限制：**

封装规则不在SailWind Layout中使用。

**32. 元件规则（第455页）**

**限制：**

元件规则不在SailWind Layout中使用。

33. 差分对规则

![](/layout/guide/19/_page_4_Picture_20.jpeg)

**限制：**

仅间隙值适用于层次结构；它被视为迹线到迹线间距的等效值。

### 设计规则类别
SailWind Layout提供五种可能的设计规则类别。并非所有类别在基本层次结构的所有级别都可用。

例如，扇出和焊盘入口类别仅在默认、封装和元件级别可用。

**图28. 规则类别图标**

![](/layout/guide/19/_page_5_Figure_2.jpeg)

**表94. 设计规则类别描述**

| 规则类别                   | 描述                                                                                                                                                                                                                                                                                                                                                                                                                                                 |  |
|---------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|
| 间距规则（第1167页）  | 设置设计中各种对象类型之间的最小允许空气间隙，<br>如迹线到迹线和过孔到迹线。                                                                                                                                                                                                                                                                                                                                                                   |  |
|                                 | 提示<br>您还可以定义条件间距规则，当<br>对象与条件规则中指定的另一个对象相邻或当对象<br>在条件规则中指定的层上时应用。例如，您可以使用条件规则<br>为网络在不同层上布线时指定不同的间距规则。                                                                                                                                                                                                                 |  |
| 布线规则（第1666页）    | 拓扑（第1867页）类型，分配和禁止过孔类型，层<br>可用于布线，指定每个网络的最大过孔数量，指定<br>拓扑类型，并允许或禁止自动布线。                                                                                                                                                                                                                                                            |  |
| 高速规则（第1402页） | 并行性（第1845页），屏蔽（第1859页），几何和<br>电气约束，以及长度匹配（第1837页）。设置<br>高级设计规则的最小和最大参数，如<br>并行性、延迟和电容。您可以从<br>原理图传递这些规则或在SailWind Layout中分配它们。您还可以传递<br>间距和布线规则给自动布线器。路由器必须能够<br>解释传递的规则。 |  |
|                                 | 提示<br>您还可以定义条件高速规则，当<br>对象与条件规则中指定的另一个对象相邻或当对象<br>在条件规则中指定的层上时应用。例如，您可以使用条件规则<br>为网络在不同层上布线时指定不同的高速规则。                                                                                                                                                                                                               |  |
| 扇出规则（第1375页）     | 自动向SMD（第1860页）焊盘添加铜形状以<br>使布线更容易并确保连接完成。<br>限制：<br>这些规则仅由SailWind Router使用                                                                                                                                                                                                                                                               |  |
| 焊盘入口（第1564页）           | 焊盘到迹线交叉的位置和角度，以及<br>在SMD（第1860页）焊盘上放置过孔的规则。                                                                                                                                                                                                                                                                                                                                                  |  |
|                                 | 提示<br>这些规则仅由SailWind Router使用                                                                                                                                                                                                                                                                                                                                                                                                         |  |

### 非默认规则指示器
当您在层次结构中更改规则时，会出现两种类型的指示器。

指示器直观地显示规则已从默认规则自定义。

• 在当前规则级别自定义的规则类别显示在列表中的类、网络、组或引脚对名称旁边的括号中。

| +5V (C)    |    |
|------------|----|
| +12V (C)   |    |
| 24MHZ (RH) | mi |
| A00        |    |
| A01        |    |
| A02        |    |
| A03        |    |
| A04        |    |
| A05        |    |
| AOS        |    |
| A07        |    |

**图29. 非默认括号指示器**

C = 间距规则

R = 布线规则

H = 高速规则

示例：后跟(RH)的网络列表具有非默认布线和高速规则定义。

• 出现在每个规则类别按钮下方的图标指示规则是在当前规则级别自定义还是仅在其他规则级别自定义。

![](/layout/guide/19/_page_6_Figure_10.jpeg)

**图30. 非默认图标指示器**

图标的含义对应于规则对话框层次结构区域中的按钮。

示例：如果绿色多边形出现在间距按钮下方，则默认值适用于您选择的对象的当前层次结构级别。

### 高级规则选项
高级规则选项是一个许可证启用的模块化附加组件，扩展了受限规则集以允许使用完整规则集。

完整的约束集允许控制更复杂的设计。没有高级规则选项，您只能访问默认和网络设计规则。使用高级规则选项，您的许可证启用类、组、引脚对、封装、元件、条件规则和差分对规则。

当您使用高级规则时，设计规则对话框上的层次结构对话框可用。您可以从网表读取层次结构分配的规则，并使用层次结构编辑和保存规则更改。

如果您没有高级规则选项，设计规则对话框上的层次结构对话框不可用。但是，原理图应用的层次结构规则驻留在网表中，并且可以传递给任何可以解释它们的自动布线器。

### 设计规则检查
在线设计规则检查（DRC）在布线和放置期间提供连续的规则检查。

在线DRC不检查文本的间距、打开的关联铜或属于封装的自由铜。下表显示了四种DRC模式。

| 模式           | 目的                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |  |
|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--|
| 防止错误 | 防止您完成任何会创建错误的操作。<br>您不能从粘贴缓冲区粘贴项目。您不能创建<br>或更改（移动、分割或斜接，例如）以下项目：<br>板轮廓、板切口、文本、铜和禁止区。要<br>编辑这些项目的属性，请使用无模式命令DRO关闭在线DRC。<br>您也可以右键单击并单击<br>忽略间距弹出菜单项以临时覆盖DRC<br>并完成操作。完成后，在线DRC<br>自动重置为预防模式。 |  |
| 警告错误    | 通过突出显示<br>规则障碍物来警告发生了设计规则违规。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |  |
| 忽略间距       | 忽略间距检查。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |  |
| 关闭            | DRC完全停用。当在线DRC关闭时，程序<br>性能增强。但是，您仅限于路线<br>命令进行迹线编辑。当您再次打开在线DRC时，<br>SailWind Layout暂停以映射板。撤销缓冲区在您关闭在线DRC时被清除，<br>但仍可用于进一步编辑。                                                                                                                                                                                                                                                                                                                                                                      |  |

**表95. 设计规则检查模式**

要打开在线DRC，请使用选项对话框中的**设计**类别或无模式命令DRP或DRW。激活在线DRC后，您可以使用对话框或无模式命令更改设置。

当在线DRC激活时，一个八角形的保护带出现在布线末端，指示任何间距违规。您可以使用选项对话框>**布线**类别>**常规**子类别中的显示保护带选项隐藏保护带。

在线设计规则检查在大多数SailWind Layout配置中可用。对于高级设计规则包用户，除高速EDC设置外的所有层次结构规则都受到监控。

**对文本的间距检查**

对于对文本的间距检查，一个称为范围框的矩形围绕文本字符串绘制，计算为包含文本字符串的最小矩形。如果文本字符串旋转，范围框也旋转。

包括在间距检查中的文本字符串是那些与检查的其他对象存在于同一级别或创建为出现在所有层上的文本字符串。

![](/layout/guide/19/_page_8_Picture_5.jpeg)

**警告：**

属于封装的文本不由在线DRC检查间距。

**对铜的间距检查**

对铜的间距检查包括不属于当前布线网络的闭合或开放铜，并且与检查的其他对象存在于同一层。与终端关联的封装中的闭合铜由在线DRC检查间距。

![](/layout/guide/19/_page_8_Picture_10.jpeg)

**警告：**

在线DRC不检查打开的关联铜和属于封装的自由铜的间距。

## 设计规则传输
原理图和设计文件存储您创建的设计规则。在SailWind Logic中设置的设计规则在将网表导入SailWind Layout时自动传输。您在SailWind Layout中设置的设计规则在SailWind Router中打开设计时自动可用。

![](/layout/guide/19/_page_8_Picture_15.jpeg)

**注意：**

SailWind Logic仅支持默认、类和网络规则。

## 设计规则的导入和导出
您可以导出和导入设计规则，以便在需要相同约束的未来设计中重用它们。

- 要导出设计规则，请按照导出ASCII文件（第291页）的说明，但在ASCII输出对话框中仅选择规则复选框。
- 要导入设计规则，请按照导入ASCII文件（第290页）的说明。

**相关主题**

**检查设计规则**

## 为设计创建规则
SailWind Layout在规则层次结构中提供了许多级别的规则。您可以在层次结构的每个级别创建规则。

![](/layout/guide/19/_page_9_Picture_3.jpeg)

**限制：**

以下链接按层次结构顺序从最低到最高优先级排列。有关更多信息，请参阅"设计规则层次结构"。

**创建所有规则类型的程序链接**

**默认规则**

- 创建默认规则
- 为特定层创建默认间距规则（条件规则）

**类规则**

- 类设计规则
- 为特定层创建类间距规则（条件规则）

**网络规则**

- 网络设计规则
- 为特定层创建网络间距规则（条件规则）

**组规则**

- 组设计规则
- 为特定层创建组间距规则（条件规则）

**引脚对规则**

- 引脚对设计规则
- 为特定层创建引脚对间距规则（条件规则）

**类对...规则**

- 创建类对类设计规则（条件规则）
- 为特定层创建类对类设计规则（条件规则）

**网络对...规则**

- 创建网络对类设计规则（条件规则）
- 为特定层创建网络对类设计规则（条件规则）
- 创建网络对网络设计规则（条件规则）
- 为特定层创建网络对网络设计规则（条件规则）

**组对...规则**

- 创建组对类设计规则（条件规则）
- 为特定层创建组对类设计规则（条件规则）
- 创建组对网络设计规则（条件规则）
- 为特定层创建组对网络设计规则（条件规则）
- 创建组对组设计规则（条件规则）

• 为特定层创建组对组设计规则（条件规则） **引脚对...规则**

- 创建引脚对类设计规则（条件规则）
- 为特定层创建引脚对类设计规则（条件规则）
- 创建引脚对网络设计规则（条件规则）
- 为特定层创建引脚对网络设计规则（条件规则）
- 创建引脚对组设计规则（条件规则）
- 为特定层创建引脚对组设计规则（条件规则）
- 创建引脚对引脚对设计规则（条件规则）
- 为特定层创建引脚对引脚对设计规则（条件规则） **封装规则**
	- 创建封装设计规则

**元件规则**

• 创建元件设计规则

**差分对规则**

• 创建差分对设计规则